<!DOCTYPE HTML>

<html>

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <link rel="icon" href="/img/main/favicon.png" type="image/png" />
    <link rel="shortcut icon" href="/favicon.ico" />
    
    
    <title>David Pine</title>
    
    

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Hugo 0.129.0">
    


    
    
    
    <meta name="description" content="Everything about the original IEvangelist, David Pine.">
    
    

    
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/img/main/me-1.png">
  <meta name="twitter:title" content="David Pine">
  <meta name="twitter:description" content="Everything about the original IEvangelist, David Pine.">

    <meta property="og:url" content="http://localhost:1313/">
  <meta property="og:site_name" content="David Pine">
  <meta property="og:title" content="David Pine">
  <meta property="og:description" content="Everything about the original IEvangelist, David Pine.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">
    <meta property="og:image" content="http://localhost:1313/img/main/me-1.png">

    
  <meta itemprop="name" content="David Pine">
  <meta itemprop="description" content="Everything about the original IEvangelist, David Pine.">
  <meta itemprop="datePublished" content="2023-06-19T00:00:00+00:00">
  <meta itemprop="dateModified" content="2023-06-19T00:00:00+00:00">
  <meta itemprop="image" content="http://localhost:1313/img/main/me-1.png">

    

    
    
    
    

    
    
    
    <link rel="stylesheet" href=/css/add-on.min.css />
    <link rel="stylesheet" href="/css/font-awesome.min.css" />
    
    <link rel="stylesheet" href=/css/github-dark.min.css />
    
    <link rel="stylesheet" href=/css/google-font.min.css />
    
    <link rel="stylesheet" href=/css/main.min.css />
    

    

    
    
    
</head>

<body>
    <a rel="me" href="https://dotnet.social/@davidpine"></a>
    <script src="/js/jquery.min.js?1.7.1"></script>

    
    <div id="wrapper">
    
    
<header id="header">
    
        <h1><a href="http://localhost:1313/">IEvangelist</i></a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/blog">
                        
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="/categories">
                        
                            <i class="fa fa-list-ol">&nbsp;</i>Categories
                    </a>
                </li>
            
                <li>
                    <a href="/about">
                        
                            <i class="fa fa-smile-o">&nbsp;</i>About
                    </a>
                </li>
            
                <li>
                    <a href="/speaking">
                        
                            <i class="fa fa-bullhorn">&nbsp;</i>Speaking
                    </a>
                </li>
            
                <li>
                    <a href="/media">
                        
                            <i class="fa fa-video-camera">&nbsp;</i>Media
                    </a>
                </li>
            
                <li>
                    <a href="/pictures">
                        
                            <i class="fa fa-camera">&nbsp;</i>Pictures
                    </a>
                </li>
            
                <li>
                    <a href="/conclusions">
                        
                            <i class="fa fa-lightbulb-o">&nbsp;</i>Conclusions
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="q" value="site:http://localhost:1313/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="q" value="site:http://localhost:1313/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/blog">
                            <h3>
                                
                                    <i class="fa fa-newspaper-o">&nbsp;</i>
                                
                                Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            <h3>
                                
                                    <i class="fa fa-list-ol">&nbsp;</i>
                                
                                Categories
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about">
                            <h3>
                                
                                    <i class="fa fa-smile-o">&nbsp;</i>
                                
                                About
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/speaking">
                            <h3>
                                
                                    <i class="fa fa-bullhorn">&nbsp;</i>
                                
                                Speaking
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/media">
                            <h3>
                                
                                    <i class="fa fa-video-camera">&nbsp;</i>
                                
                                Media
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/pictures">
                            <h3>
                                
                                    <i class="fa fa-camera">&nbsp;</i>
                                
                                Pictures
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/conclusions">
                            <h3>
                                
                                    <i class="fa fa-lightbulb-o">&nbsp;</i>
                                
                                Conclusions
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section>
            <ul class="links">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    <li>
                        <a href="http://localhost:1313/blog/dotnet-async-enumerable/"><p>Exploring .NET streaming API scenarios</p></a>
                    </li>
                
                    <li>
                        <a href="http://localhost:1313/blog/dotnet-dependency-injection/"><p>A conversation with ChatGPT </p></a>
                    </li>
                
                    <li>
                        <a href="http://localhost:1313/blog/github-actions-sdk/"><p>Hello from the GitHub Actions: Core .NET SDK</p></a>
                    </li>
                
            </ul>
        </section>

    
        
</section>

    
    <div id="main">
        
            <article class="post">
    <header>
    <div class="title">
        
            <h2><a href="http://localhost:1313/blog/dotnet-async-enumerable/">Exploring .NET streaming API scenarios</a></h2>
        
        
            <p>Use the IAsyncEnumerable&lt;T&gt; interface to stream data from a server to a client.</p>
        
    </div>
    <div class="meta">
        
            
        

        
        
        
        
        
        

        
        
        

        <div style="display: none;"
            data-date='2025'
            data-lastmod='2023'
            data-min='2023'
            data-max='2025'
            data-difference='2'
            data-var='-1'>
        </div>

        
        <time class="published" data-extras='2'>
            <span class="normalize">
                June, 2023
            </span>
        </time>
        

        <span class="author">David Pine</span>
        
            <p>14 minute read</p>
        
        
    </div>
</header>


    <section id="social-share">
        <ul class="icons">
            


<li><a href="//github.com/sponsors/IEvangelist?o=esb" target="_blank" class="share-btn github" title="Sponsor IEvangelist on GitHub?">
    <i class="fa fa-heart-o"></i>
    <p>Sponsor</p>
</a></li>


<li><a href="//twitter.com/share?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f&text=Exploring%20.NET%20streaming%20API%20scenarios&via=davidpine7" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f&title=Exploring%20.NET%20streaming%20API%20scenarios" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f&title=Exploring%20.NET%20streaming%20API%20scenarios" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f&title=Exploring%20.NET%20streaming%20API%20scenarios" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by David%20Pine&body=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
    
    

    
        
        




    


        

        <a href="http://localhost:1313/blog/dotnet-async-enumerable/" class="image featured">
            <img src="/img/2023/06/streaming-apis.png" alt="..." />
        </a>
    


    <div id="content">
        <div class="admonition note">
    <div class="title" style="color: red !important">
        <b>❗ IMPORTANT</b>
    </div>
    <div class="content">
        The featured image was generated using <a href="https://www.bing.com/create">bing.com/create powered by DALL·E</a>.
    </div>
</div>
<br />
<h1 id="exploring-net-streaming-api-scenarios">Exploring .NET streaming API scenarios</h1>
<p>If you&rsquo;re a .NET developer, chances are you&rsquo;re already familiar with the <code>IAsyncEnumerable&lt;T&gt;</code> interface. This interface was introduced in .NET Core 3.0 and is used to asynchronously iterate over a collection of data. This is a great way to stream data from a server to a client. In this post, you&rsquo;ll learn how to:</p>
<ul>
<li>Expose an ASP.NET Core Minimal API endpoint that returns <code>IAsyncEnumerable&lt;T&gt;</code>.</li>
<li>Consume the same <code>IAsyncEnumerable&lt;T&gt;</code> from an ASP.NET Core Blazor WebAssembly app.</li>
</ul>
<p>In this post, you&rsquo;ll explore a scenario inspired by ChatGPT&rsquo;s user experience that streams UI updates to the client from the server in real-time.</p>
<p><strong>TL;DR;</strong></p>
<p>If you&rsquo;d rather just see the code, you can see it on the <a href="https://github.com/IEvangelist/blazor-azure-openai"><i class="fa fa-github" aria-hidden="true"></i> GitHub repository <code>https://github.com/IEvangelist/blazor-azure-openai</code> <i class="fa fa-external-link" aria-hidden="true"></i></a>.</p>
<h2 id="server">Server</h2>
<p>The server is an ASP.NET Core Minimal API app, that defines an endpoint that returns an <code>IAsyncEnumerable&lt;T&gt;</code>. This is important because when it comes to streaming data, you want to avoid buffering the entire collection in memory. Instead, you want to stream the data as it becomes available. This is exactly how <code>IAsyncEnumerable&lt;T&gt;</code> operates. The app will make use of a few NuGet packages:</p>
<ul>
<li><a href="https://www.nuget.org/packages/Azure.AI.OpenAI">📦 <code>Azure.AI.OpenAI</code></a></li>
<li><a href="https://www.nuget.org/packages/Microsoft.AspNetCore.Components.WebAssembly.Server">📦 <code>Microsoft.AspNetCore.Components.WebAssembly.Server</code></a></li>
<li><a href="https://www.nuget.org/packages/Microsoft.Extensions.Azure">📦 <code>Microsoft.Extensions.Azure</code></a></li>
<li><a href="https://www.nuget.org/packages/Microsoft.Extensions.Caching.Memory">📦 <code>Microsoft.Extensions.Caching.Memory</code></a></li>
<li><a href="https://www.nuget.org/packages/Swashbuckle.AspNetCore">📦 <code>Swashbuckle.AspNetCore</code></a></li>
</ul>
<p>Here&rsquo;s what the project file looks like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Project</span> <span style="color:#a6e22e">Sdk=</span><span style="color:#e6db74">&#34;Microsoft.NET.Sdk.Web&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PropertyGroup&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TargetFramework&gt;</span>net7.0<span style="color:#f92672">&lt;/TargetFramework&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Nullable&gt;</span>enable<span style="color:#f92672">&lt;/Nullable&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ImplicitUsings&gt;</span>enable<span style="color:#f92672">&lt;/ImplicitUsings&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/PropertyGroup&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ItemGroup&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;1.0.0-beta.5&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Azure.AI.OpenAI&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;7.0.5&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.AspNetCore.Components.WebAssembly.Server&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;1.6.3&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.Extensions.Azure&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;7.0.0&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.Extensions.Caching.Memory&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;6.5.0&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Swashbuckle.AspNetCore&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/ItemGroup&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ItemGroup&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;InternalsVisibleTo</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Azure.OpenAI.Client.EndToEndTests&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/ItemGroup&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ItemGroup&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;ProjectReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;..\Client\Azure.OpenAI.Client.csproj&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;ProjectReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;..\Shared\Azure.OpenAI.Shared.csproj&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/ItemGroup&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Project&gt;</span>
</span></span></code></pre></div><p>The <em>Program.cs</em> file makes use of C#&rsquo;s top-level programs, which is a great way to reduce boilerplate code. The <code>WebApplication.CreateBuilder(args)</code> creates an instance of <code>WebApplicationBuilder</code> and builds an app (<code>WebApplication</code>) before configuring it and running the <code>app</code> as shown in the following <code>Program</code> class:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Copyright (c) David Pine. All rights reserved.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Licensed under the MIT License.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> builder = WebApplication.CreateBuilder(args);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> var app = BuildApp(builder);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ConfigureApp(app);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">await</span> app.RunAsync();
</span></span></code></pre></div><div class="admonition tip">
    <div class="title">
        <b>💡 TIP</b>
    </div>
    <div class="content">You can encapsulate the building and configuring of your app with the use of <code>partial</code> classes. Consider two additional files, <em>Program.Build.cs</em> and <em>Program.Configure.cs</em>.</div>
</div>
<br />
<p>The <em>Program.Build.cs</em> file contains the <code>BuildApp</code> method, which is responsible for building the app. The <code>BuildApp</code> functionality is defined as the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Copyright (c) David Pine. All rights reserved.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Licensed under the MIT License.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Program</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">static</span> WebApplication BuildApp(WebApplicationBuilder builder)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        builder.Services.AddAzureOpenAI(builder.Configuration);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        builder.Services.AddEndpointsApiExplorer();
</span></span><span style="display:flex;"><span>        builder.Services.AddSwaggerGen();
</span></span><span style="display:flex;"><span>        builder.Services.AddHttpClient();
</span></span><span style="display:flex;"><span>        builder.Services.AddHttpLogging(
</span></span><span style="display:flex;"><span>            options =&gt; options.LoggingFields = HttpLoggingFields.All);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        builder.Services.AddMemoryCache();
</span></span><span style="display:flex;"><span>        builder.Services.AddControllersWithViews();
</span></span><span style="display:flex;"><span>        builder.Services.AddRazorPages();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> builder.Build();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The preceding code, given an instance of <code>WebApplicationBuilder</code>, will:</p>
<ul>
<li>Adds support for Azure AI&rsquo;s OpenAI service with use of the official Azure .NET SDK</li>
<li>Adds support for OpenAPI (not to be confused with OpenAI) Swagger</li>
<li>Adds support for HTTP support with logging</li>
<li>Adds support for in-memory caching</li>
<li>Adds support for controllers with views</li>
<li>Adds support for Razor Pages</li>
<li>Returns the built <code>app</code></li>
</ul>
<p>The <em>Program.Configure.cs</em> file contains the <code>ConfigureApp</code> method, which is responsible for configuring the app. The <code>ConfigureApp</code> functionality is defined as the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Copyright (c) David Pine. All rights reserved.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Licensed under the MIT License.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Program</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> ConfigureApp(WebApplication app)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (app.Environment.IsDevelopment())
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            app.UseSwagger();
</span></span><span style="display:flex;"><span>            app.UseSwaggerUI();
</span></span><span style="display:flex;"><span>            app.UseWebAssemblyDebugging();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            app.UseExceptionHandler(<span style="color:#e6db74">&#34;/Error&#34;</span>);
</span></span><span style="display:flex;"><span>            app.UseHsts();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        app.UseHttpsRedirection();
</span></span><span style="display:flex;"><span>        app.UseBlazorFrameworkFiles();
</span></span><span style="display:flex;"><span>        app.UseStaticFiles();
</span></span><span style="display:flex;"><span>        app.UseRouting();
</span></span><span style="display:flex;"><span>        app.MapRazorPages();
</span></span><span style="display:flex;"><span>        app.MapControllers();
</span></span><span style="display:flex;"><span>        app.MapFallbackToFile(<span style="color:#e6db74">&#34;index.html&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        app.MapAzureOpenAiApi();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This code configures the given <code>app</code> by:</p>
<ul>
<li>Conditionally add various middleware based on the environment
<ul>
<li>Swagger UI and WebAssembly debugging in development</li>
<li>Exception handling and HSTS in production</li>
</ul>
</li>
<li>Using HTTPS redirection</li>
<li>Using Blazor WebAssembly files</li>
<li>Using static files</li>
<li>Using routing</li>
<li>Using Razor pages, controllers, and fallback to <code>index.html</code></li>
<li>And finally, mapping the Azure OpenAI API</li>
</ul>
<p>From all of the building and configuring bits, the most important parts are the <code>AddAzureOpenAI</code> and <code>MapAzureOpenAiApi</code> extension methods. The <code>AddAzureOpenAI</code> extension method is defined as the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Copyright (c) David Pine. All rights reserved.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Licensed under the MIT License.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Azure.OpenAI.Server.Extensions;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ServiceCollectionExtensions</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">static</span> IServiceCollection AddAzureOpenAI(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span> IServiceCollection services, IConfiguration config)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        services.AddAzureClients(
</span></span><span style="display:flex;"><span>            factory =&gt;
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">var</span> endpoint = config[<span style="color:#e6db74">&#34;AzureOpenAI:Endpoint&#34;</span>];
</span></span><span style="display:flex;"><span>                ArgumentNullException.ThrowIfNull(endpoint);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">var</span> apiKey = config[<span style="color:#e6db74">&#34;AzureOpenAI:ApiKey&#34;</span>];
</span></span><span style="display:flex;"><span>                ArgumentNullException.ThrowIfNull(apiKey);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                factory.AddOpenAIClient(
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">new</span> Uri(endpoint), <span style="color:#66d9ef">new</span> AzureKeyCredential(apiKey));
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> services;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <code>AddAzureOpenAI</code> extension method is responsible for adding the Azure OpenAI client to the service collection using the Azure .NET SDK&rsquo;s <code>AddAzureClients</code> and <code>AddOpenAIClient</code> calls. The <code>MapAzureOpenAiApi</code> extension method is defined as the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Copyright (c) David Pine. All rights reserved.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Licensed under the MIT License.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Azure.OpenAI.Server.Extensions;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EndpointRouteBuilderExtensions</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">static</span> IEndpointRouteBuilder MapAzureOpenAiApi(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span> IEndpointRouteBuilder routeBuilder)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> api = routeBuilder.MapGroup(<span style="color:#e6db74">&#34;api/openai&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        api.MapPost(<span style="color:#e6db74">&#34;chat&#34;</span>, PostChatPromptAsync);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> routeBuilder;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">async</span> IAsyncEnumerable&lt;TokenizedResponse&gt; PostChatPromptAsync(
</span></span><span style="display:flex;"><span>        OpenAIClient client, ChatPrompt prompt, IConfiguration config)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// The identifier of the model from Azure AI&#39;s OpenAI Studio </span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// (https://oai.azure.com/portal).</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// To use this streaming API, you&#39;ll need the `gpt-35-turbo` model.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> deploymentId = config[<span style="color:#e6db74">&#34;AzureOpenAI:DeploymentId&#34;</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> response = <span style="color:#66d9ef">await</span> client.GetChatCompletionsStreamingAsync(
</span></span><span style="display:flex;"><span>            deploymentId, <span style="color:#66d9ef">new</span> ChatCompletionsOptions
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                Messages =
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// Trick the AI into thinking it&#39;s &#34;Blazor Clippy&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">new</span> ChatMessage(ChatRole.System, <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span>                        You<span style="color:#960050;background-color:#1e0010">&#39;</span>re an AI assistant <span style="color:#66d9ef">for</span> developers, 
</span></span><span style="display:flex;"><span>                        helping them write code more efficiently.
</span></span><span style="display:flex;"><span>                        You<span style="color:#960050;background-color:#1e0010">&#39;</span>re name <span style="color:#66d9ef">is</span> <span style="color:#e6db74">&#34;Blazor Clippy&#34;</span>.
</span></span><span style="display:flex;"><span>                        You will always reply with a Markdown formatted response.
</span></span><span style="display:flex;"><span>                        <span style="color:#e6db74">&#34;&#34;&#34;),
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// Share an example message with the user.</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">new</span> ChatMessage(ChatRole.User, <span style="color:#e6db74">&#34;What&#39;s your name?&#34;</span>),
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// And it&#39;s response.</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">new</span> ChatMessage(ChatRole.Assistant,
</span></span><span style="display:flex;"><span>                        <span style="color:#e6db74">&#34;Hi, my name is **Blazor Clippy**! Nice to meet you. 🤓&#34;</span>),
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// Then the user&#39;s prompt.</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">new</span> ChatMessage(ChatRole.User, prompt.Prompt)
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">using</span> StreamingChatCompletions completions = response.Value;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">foreach</span> (StreamingChatChoice choice <span style="color:#66d9ef">in</span> completions.GetChoicesStreaming())
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">foreach</span> (ChatMessage message <span style="color:#66d9ef">in</span> choice.GetMessageStreaming())
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> TokenizedResponse(message.Content);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="admonition note">
    <div class="title" style="color: red !important">
        <b>📝 NOTE</b>
    </div>
    <div class="content">
        <p>While I&rsquo;ve hardcoded &ldquo;Blazor Clippy&rdquo; as the AI persona for our call to Azure AI OpenAI&rsquo;s ChatGPT streaming API, I&rsquo;m considering adding support for other personas. If you&rsquo;d like to see support for other personas, please let me know by opening an issue on GitHub — or better yet, submit a PR! Here are some ideas for personas 🎉:</p>
<ul>
<li>Add support for &ldquo;Blazor Bot&rdquo;</li>
<li>Add support for &ldquo;Blazor Yoda&rdquo;</li>
<li>Add support for &ldquo;Blazor Elmo&rdquo;</li>
<li>Add support for &ldquo;Blazor the Pirate&rdquo;</li>
<li>Add support for &ldquo;Blazor the Rock Star&rdquo;</li>
</ul>
    </div>
</div>
<br />
<p>The <code>MapAzureOpenAiApi</code> extension method is responsible for mapping the Azure OpenAI API to the given <code>routeBuilder</code>. The <code>PostChatPromptAsync</code> method is responsible for handling the HTTP <code>POST</code> request to the <code>/api/openai/chat</code> endpoint. The <code>PostChatPromptAsync</code> method posts the user&rsquo;s prompt, and before doing so it configures the AI&rsquo;s persona and then returns the AI&rsquo;s response.</p>
<p>The SDK requires a few steps but it&rsquo;s fairly straightforward. The <code>PostChatPromptAsync</code> method does the following:</p>
<ul>
<li>Asks the <code>client</code> to get the chat completions for streaming asynchronously
<ul>
<li>The <code>deploymentId</code> is used to specify the model</li>
<li>The <code>ChatCompletionsOptions.Messages</code> configures messages to instruct the AI to take on a persona</li>
</ul>
</li>
<li>The <code>response.Value</code> acts as the available <code>completions</code>, from which the streaming API returns:
<ul>
<li>Multiple <code>choice</code> instances are used to stream the <code>message</code></li>
<li>And <code>yield return new TokenizedResponse(message.Content);</code> is used to return the AI&rsquo;s response</li>
</ul>
</li>
</ul>
<p>The <code>TokenizedResponse</code> is a simple class that&rsquo;s used to return the AI&rsquo;s response to the client:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Copyright (c) David Pine. All rights reserved.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Licensed under the MIT License.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Azure.OpenAI.Shared;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A tokenize response, wrapper around the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// response&#39;s raw &lt;paramref name=&#34;Content&#34;/&gt; value.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;Content&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The content provided for the given response.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">record</span> <span style="color:#a6e22e">class</span> TokenizedResponse(<span style="color:#66d9ef">string</span> Content);
</span></span></code></pre></div><p>This object will be consumed by the client. Let&rsquo;s have a look at that next.</p>
<h2 id="client">Client</h2>
<p>The client is an ASP.NET Core Blazor WebAssembly app, that consumes the <code>IAsyncEnumerable&lt;T&gt;</code> from the server. The <em>Program.cs</em> file is responsible for configuring the client&rsquo;s <code>HttpClient</code> to use the server&rsquo;s base address:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Copyright (c) David Pine. All rights reserved.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Licensed under the MIT License.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> builder = WebAssemblyHostBuilder.CreateDefault(args);
</span></span><span style="display:flex;"><span>builder.RootComponents.Add&lt;App&gt;(<span style="color:#e6db74">&#34;#app&#34;</span>);
</span></span><span style="display:flex;"><span>builder.RootComponents.Add&lt;HeadOutlet&gt;(<span style="color:#e6db74">&#34;head::after&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>builder.Services.AddScoped(
</span></span><span style="display:flex;"><span>    sp =&gt; <span style="color:#66d9ef">new</span> HttpClient
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        BaseAddress = <span style="color:#66d9ef">new</span> Uri(builder.HostEnvironment.BaseAddress)
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>builder.Services.AddSingleton&lt;AppState&gt;();
</span></span><span style="display:flex;"><span>builder.Services.AddHttpClient();
</span></span><span style="display:flex;"><span>builder.Services.AddSingleton&lt;OpenAIPromptQueue&gt;();
</span></span><span style="display:flex;"><span>builder.Services.AddLocalStorageServices();
</span></span><span style="display:flex;"><span>builder.Services.AddSessionStorageServices();
</span></span><span style="display:flex;"><span>builder.Services.AddSpeechSynthesisServices();
</span></span><span style="display:flex;"><span>builder.Services.AddSpeechRecognitionServices();
</span></span><span style="display:flex;"><span>builder.Services.AddMudServices();
</span></span><span style="display:flex;"><span>builder.Services.AddLocalization();
</span></span><span style="display:flex;"><span>builder.Services.AddScoped&lt;CultureService&gt;();
</span></span><span style="display:flex;"><span>builder.Services.AddSingleton&lt;ObjectPoolProvider, DefaultObjectPoolProvider&gt;();
</span></span><span style="display:flex;"><span>builder.Services.AddSingleton(
</span></span><span style="display:flex;"><span>    sp =&gt; sp.GetRequiredService&lt;ObjectPoolProvider&gt;().CreateStringBuilderPool());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> host = builder.Build()
</span></span><span style="display:flex;"><span>    .DetectClientCulture();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">await</span> JSHost.ImportAsync(
</span></span><span style="display:flex;"><span>    moduleName: nameof(JavaScriptModule),
</span></span><span style="display:flex;"><span>    moduleUrl: <span style="color:#e6db74">$&#34;../site.js?{Guid.NewGuid()}&#34;</span> <span style="color:#75715e">/* cache bust */</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">await</span> host.RunAsync();
</span></span></code></pre></div><p>The client app configures itself as follows:</p>
<ul>
<li><code>AppState</code> is added</li>
<li>Support for HTTP requests is added</li>
<li>A custom service named <code>OpenAIPromptQueue</code> is added as a singleton</li>
<li>Local and session storage services are added</li>
<li>Speech synthesis and recognition services are added</li>
<li><a href="https://mudblazor.com"><strong>MudBlazor</strong></a> services are added</li>
<li>A <code>CultureService</code> is added</li>
<li>Object pools are used and expose the default <code>StringBuilder</code> pool for optimal performance</li>
<li>Once the <code>builder</code> is built, the client&rsquo;s culture is detected (the app may restart if needed)</li>
<li>The <code>JSHost</code> is used to import the <code>site.js</code> file, which defines an ES6 module that&rsquo;s used to expose <code>scrollIntoView</code> functionality on the client</li>
<li>Finally, the <code>host</code> is run</li>
</ul>
<p>The <code>JavaScriptModule</code> class defines the connection between the app&rsquo;s <em>site.js</em> code, consider the <em>JavaScriptModule.cs</em> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Copyright (c) David Pine. All rights reserved.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Licensed under the MIT License.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Azure.OpenAI.Client.Interop;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">JavaScriptModule</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [JSImport(&#34;scrollIntoView&#34;, nameof(JavaScriptModule))]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">partial</span> Task ScrollIntoView(<span style="color:#66d9ef">string</span> id);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The class is marked as <code>partial</code>, as well as the <code>ScrollIntoView</code> method. There is a source generator that provides the bridge between the C# and JavaScript code. This is the same idea that I&rsquo;ve written about with my side-project named <i class="fa fa-bolt" aria-hidden="true"></i> <a href="http://localhost:1313/blog/blazorators/" title="Blazorators"><strong>Blazorators</strong></a> 🤓!</p>
<p>The corresponding JavaScript code is defined in the <em>site.js</em> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">scrollIntoView</span>(<span style="color:#a6e22e">id</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">element</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#a6e22e">id</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">element</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">scrollIntoView</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">behavior</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;smooth&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">block</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;end&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">inline</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;nearest&#39;</span>
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This code simply exports a <code>scrollIntoView</code> function that&rsquo;s used to scroll the given element into view. The <code>id</code> is used to find the element, and if found, the element is scrolled into view smoothly.</p>
<p>The <code>OpenAIPromptQueue</code> is a custom service that&rsquo;s used to queue up the user&rsquo;s prompts and the AI&rsquo;s responses. The <code>OpenAIPromptQueue</code> is defined as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Copyright (c) David Pine. All rights reserved.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Licensed under the MIT License.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> Azure.OpenAI.Client.Services;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">OpenAIPromptQueue</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">readonly</span> IServiceProvider _provider;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">readonly</span> ILogger&lt;OpenAIPromptQueue&gt; _logger;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">readonly</span> ObjectPool&lt;StringBuilder&gt; _builderPool;
</span></span><span style="display:flex;"><span>    Task? _processPromptTask = <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> OpenAIPromptQueue(
</span></span><span style="display:flex;"><span>        IServiceProvider provider,
</span></span><span style="display:flex;"><span>        ILogger&lt;OpenAIPromptQueue&gt; logger,
</span></span><span style="display:flex;"><span>        ObjectPool&lt;StringBuilder&gt; builderPool) =&gt;
</span></span><span style="display:flex;"><span>        (_provider, _logger, _builderPool) = (provider, logger, builderPool);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Enqueue(<span style="color:#66d9ef">string</span> prompt, Func&lt;PromptResponse, Task&gt; handler)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (_processPromptTask <span style="color:#66d9ef">is</span> not <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _processPromptTask = Task.Run(<span style="color:#66d9ef">async</span> () =&gt;
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> responseBuffer = _builderPool.Get();
</span></span><span style="display:flex;"><span>            responseBuffer.Clear(); <span style="color:#75715e">// Ensure initial state is empty.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> isError = <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> debugLogEnabled = _logger.IsEnabled(LogLevel.Debug);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">using</span> var scope = _provider.CreateScope();
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">using</span> var client = 
</span></span><span style="display:flex;"><span>                    scope.ServiceProvider.GetRequiredService&lt;HttpClient&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">var</span> options = JsonSerializationDefaults.Options;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">var</span> chatPrompt = <span style="color:#66d9ef">new</span> ChatPrompt { Prompt = prompt };
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">var</span> json = chatPrompt.ToJson(options);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">using</span> var body = <span style="color:#66d9ef">new</span> StringContent(
</span></span><span style="display:flex;"><span>                    json, Encoding.UTF8, <span style="color:#e6db74">&#34;application/json&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">var</span> response = <span style="color:#66d9ef">await</span> client.PostAsync(
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;api/openai/chat&#34;</span>, body);
</span></span><span style="display:flex;"><span>                response.EnsureSuccessStatusCode();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">using</span> var stream = <span style="color:#66d9ef">await</span> response.Content.ReadAsStreamAsync();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> tokenizedResponse <span style="color:#66d9ef">in</span>
</span></span><span style="display:flex;"><span>                    JsonSerializer.DeserializeAsyncEnumerable&lt;TokenizedResponse&gt;(
</span></span><span style="display:flex;"><span>                        stream, options))
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span> (tokenizedResponse <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                    {
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    responseBuffer.Append(tokenizedResponse.Content);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">var</span> responseText = NormalizeResponseText(
</span></span><span style="display:flex;"><span>                        responseBuffer, _logger, debugLogEnabled);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">await</span> handler(
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">new</span> PromptResponse(
</span></span><span style="display:flex;"><span>                            prompt, responseText, <span style="color:#66d9ef">false</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// Required for Blazor to render live updates.</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">await</span> Task.Delay(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">catch</span> (Exception ex)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                _logger.LogWarning(
</span></span><span style="display:flex;"><span>                    ex,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;Unable to generate response: {Error}&#34;</span>,
</span></span><span style="display:flex;"><span>                    ex.Message);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">await</span> handler(
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">new</span> PromptResponse(
</span></span><span style="display:flex;"><span>                        prompt, ex.Message, <span style="color:#66d9ef">true</span>, isError = <span style="color:#66d9ef">true</span>));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">finally</span>
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (isError <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">false</span>)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">var</span> responseText = NormalizeResponseText(
</span></span><span style="display:flex;"><span>                        responseBuffer, _logger, debugLogEnabled);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">await</span> handler(
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">new</span> PromptResponse(
</span></span><span style="display:flex;"><span>                            prompt, responseText, <span style="color:#66d9ef">true</span>));
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                _builderPool.Return(responseBuffer);
</span></span><span style="display:flex;"><span>                _processPromptTask = <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">string</span> NormalizeResponseText(
</span></span><span style="display:flex;"><span>        StringBuilder builder, ILogger logger, <span style="color:#66d9ef">bool</span> debugLogEnabled)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (builder <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">null</span> or { Length: <span style="color:#ae81ff">0</span> })
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> text = builder.ToString();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (debugLogEnabled)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            logger.LogDebug(
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;Before normalize:{Newline}{Tab}{Text}&#34;</span>,
</span></span><span style="display:flex;"><span>                Environment.NewLine, <span style="color:#e6db74">&#39;\t&#39;</span>, text);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        text = LineEndingsRegex().Replace(text, <span style="color:#e6db74">&#34;\n&#34;</span>);
</span></span><span style="display:flex;"><span>        text = Regex.Unescape(text);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (debugLogEnabled)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            logger.LogDebug(
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;After normalize:{Newline}{Tab}{Text}&#34;</span>,
</span></span><span style="display:flex;"><span>                Environment.NewLine, <span style="color:#e6db74">&#39;\t&#39;</span>, text);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> text;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [GeneratedRegex(&#34;\\r\\n|\\n\\r|\\r&#34;)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">partial</span> Regex LineEndingsRegex();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Ignore the normalization bits, they did seem to be needed as the OpenAI responses will vary in line endings — so I felt inclined to normalize all responses, it may not be needed but I like consistency.</p>
<p>While this queuing class is a bit verbose, <a href="https://github.com/dotnet/runtime/issues/87577"><i class="fa fa-link" aria-hidden="true"></i> I have an official .NET API proposal in the works that should dramatically improve this streaming experience when receiving an <code>IAsyncEnumerable&lt;T&gt;</code> HTTP endpoint</a> — I&rsquo;d love 💜 your thoughts on this proposal, give me a reaction or drop a comment. In this case, we know that <code>T</code> is the <code>TokenizedResponse</code> type.</p>
<p>Since these convenience based-methods are not yet available at the time of writing, we have to do a bit of work to get the streaming response from the AI. The <code>Enqueue</code> method is used to queue up the user&rsquo;s prompt and the AI&rsquo;s response. The <code>handler</code> is a callback that&rsquo;s invoked when the AI responds. The functionality is defined as follows:</p>
<ul>
<li>If the <code>_processPromptTask</code> is not <code>null</code>, then we&rsquo;re already processing a prompt, so we can return early</li>
<li>Otherwise, call <code>Task.Run</code>:
<ul>
<li>Get a <code>responseBuffer</code> from the <code>StringBuilder</code> pool</li>
<li>Clear the <code>responseBuffer</code> to ensure it&rsquo;s empty before use</li>
<li>Create a <code>scope</code> and <code>HttpClient</code> instance from the <code>ServiceProvider</code></li>
<li>Call the HTTP <code>POST</code> endpoint to send the user&rsquo;s prompt to the AI</li>
<li>If the request is successful, then we can start processing the response as a stream</li>
</ul>
</li>
</ul>
<p>The real magic is mapping the <code>stream</code> to the <code>JsonSerializer.DeserializeAsyncEnumerable&lt;TokenizedResponse&gt;(stream, options)</code> call, which is asynchronously enumerating the <code>TokenizedResponse</code> instances as they are received in real-time. The <code>handler</code> is invoked and the UI updates as if the response is being written live into the browser.</p>
<h3 id="example-http-request-and-streaming-response">Example HTTP request and streaming response</h3>
<p>If I prompt the app with the following HTTP POST request:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#a6e22e">POST</span> /api/openai/chat <span style="color:#66d9ef">HTTP</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1.1</span>
</span></span><span style="display:flex;"><span>HOST<span style="color:#f92672">:</span> <span style="color:#ae81ff">localhost:7184</span>
</span></span><span style="display:flex;"><span>Content-Type<span style="color:#f92672">:</span> <span style="color:#ae81ff">application/json; charset=utf-8</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{ <span style="color:#f92672">&#34;prompt&#34;</span>: <span style="color:#e6db74">&#34;State your name and purpose.&#34;</span> }
</span></span></code></pre></div><p>One possible response from the AI is streamed back to the client as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;My&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; name&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; is&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; **&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;Bl&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;azor&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; Cl&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;ippy&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;**&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; and&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; my&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; purpose&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; is&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; to&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; assist&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; developers&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; in&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; writing&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; code&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; more&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; efficiently&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;.&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; I&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;&#39;m&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; here&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; to&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; help&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; you&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; with&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; code&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;-related&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; tasks&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;,&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; answer&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; questions&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;,&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; and&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; provide&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; guidance&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; where&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; needed&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;.&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; Let&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; me&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; know&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; how&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; I&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; can&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; be&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; of&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34; assistance&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;!&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>Each <code>{ &quot;content&quot;: &quot;&lt;value&gt;&quot; }</code> object is a <code>TokenizedResponse</code> instance, and the <code>content</code> property was generated. The <code>null</code> values are the AI&rsquo;s way of indicating the start and end of the stream response. This entire response is streamed into the user&rsquo;s browser in real-time, and the UI is updated as the response is received.</p>
<p><strong>Here&rsquo;s this specific example as rendered on the UI:</strong></p>
<p><img src="/img/2023/06/example.png" alt="Here&rsquo;s this specific example as rendered on the UI" title="Here's this specific example as rendered on the UI"></p>
<p>The client app demonstrates several other really interesting aspects of client-side app development with .NET, I encourage you to check out the source code to see how it all works.</p>
<h2 id="in-conclusion">In conclusion</h2>
<p>The app has several other major features that I&rsquo;m proud of, and I hope you&rsquo;ll enjoy seeing them. Here are a few screenshots of the app in action:</p>
<p><strong>The first example is a user prompt and AI response:</strong></p>
<p><img src="/img/2023/06/response.png" alt="The first example is a user prompt and AI response" title="The first example is a user prompt and AI response"></p>
<p><strong>The next question being asked and the response being generated:</strong></p>
<p><img src="/img/2023/06/response-two.png" alt="The next question being asked and the response being generated" title="The next question being asked and the response being generated"></p>
<p>Feel free to share this Tweet, as it was a bit of an inspiration to finish this post&hellip;I hope you enjoyed it.</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">🤓 Did you know that <a href="https://twitter.com/aspnet?ref_src=twsrc%5Etfw">@aspnet</a> Minimal APIs can return IAsyncEnumerable&lt;T&gt; and you can consume said APIs with await foreach too?!<a href="https://twitter.com/stephentoub?ref_src=twsrc%5Etfw">@stephentoub</a> shared this API with me and it&#39;s 🔥.<a href="https://twitter.com/hashtag/dotnet?src=hash&amp;ref_src=twsrc%5Etfw">#dotnet</a> <a href="https://twitter.com/hashtag/csharp?src=hash&amp;ref_src=twsrc%5Etfw">#csharp</a><br><br>1️⃣ API returns IAsyncEnumerable&lt;T&gt;<br>2️⃣ JsonSerializer.DeserializeAsyncEnumerable&lt;T&gt; <a href="https://t.co/yNSYv0OZXb">pic.twitter.com/yNSYv0OZXb</a></p>&mdash; David Pine (@davidpine@dotnet.social) 🇺🇦 (@davidpine7) <a href="https://twitter.com/davidpine7/status/1668970304553582592?ref_src=twsrc%5Etfw">June 14, 2023</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>The major takeaways from this post are:</p>
<ul>
<li>You can share models between the server and the client code</li>
<li>You can return <code>IAsyncEnumerable&lt;T&gt;</code> to stream data to the client</li>
<li>You can consume the <code>IAsyncEnumerable&lt;T&gt;</code> on the client to stream data to the UI</li>
</ul>
<p>Here&rsquo;s the <a href="https://github.com/IEvangelist/blazor-azure-openai"><i class="fa fa-github" aria-hidden="true"></i> GitHub repository link: <code>https://github.com/IEvangelist/blazor-azure-openai</code> <i class="fa fa-external-link" aria-hidden="true"></i></a></p>
<p>🙌🏽 I&rsquo;m also excited to see what you build with the OpenAI API. If you have any questions, please feel free to reach out to me on <a href="https://twitter.com/davidpine7">Twitter</a> or <a href="https://github.com/IEvangelist">GitHub</a>.</p>

    </div>

    <footer>
        <ul class="stats">
    <li>
        <i class="fa fa-list-ol">&nbsp;</i>
        Categories
    </li>
    
        
        
            
            
            <li><a class="article-category-link" href="http://localhost:1313/categories/csharp">CSharp</a></li>
            
            
            <li><a class="article-category-link" href="http://localhost:1313/categories/.net">.NET</a></li>
            
            
            <li><a class="article-category-link" href="http://localhost:1313/categories/json">JSON</a></li>
            
        
    
</ul>
    </footer>
</article>
<ul class="actions pagination">
    
        <li><a href="http://localhost:1313/blog/dotnet-dependency-injection/"
                class="button big previous">A conversation with ChatGPT </a></li>
    

    
</ul>



    



            <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            


<li><a href="//github.com/sponsors/IEvangelist?o=esb" target="_blank" class="share-btn github" title="Sponsor IEvangelist on GitHub?">
    <i class="fa fa-heart-o"></i>
    <p>Sponsor</p>
</a></li>


<li><a href="//twitter.com/share?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f&text=Exploring%20.NET%20streaming%20API%20scenarios&via=davidpine7" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f&title=Exploring%20.NET%20streaming%20API%20scenarios" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f&title=Exploring%20.NET%20streaming%20API%20scenarios" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f&title=Exploring%20.NET%20streaming%20API%20scenarios" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by David%20Pine&body=http%3a%2f%2flocalhost%3a1313%2fblog%2fdotnet-async-enumerable%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
</section>

        
    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
    
    <section class='p-2 justify-content-center'>
      <img src="/img/main/me-1.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" />
      <img src="/img/main/me-2.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" style="display: none;" />
      <img src="/img/main/me-3.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" style="display: none;" />
      <img src="/img/main/me-4.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" style="display: none;" />
      <img src="/img/main/me-5.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" style="display: none;" />
      
      
    </section>
    
    <header>
      <h2>David Pine</h2>
      <p>
        🤓 Changing the world — one line of code at a time.
        <span class="responsive-float">
          <a id='davidpine7' href='https://twitter.com/davidpine7?ref_src=twsrc%5Etfw' class='twitter-follow-button'
            data-size='large' data-show-count='false'>
            Follow @davidpine7
          </a>
        </span>
        <script>
          window.twitter = (function (d, s, id) {
            var js,
              fjs = d.getElementsByTagName(s)[0],
              t = window.twttr || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);

            t._e = [];
            t.ready = function (f) {
              t._e.push(f);
            };

            return t;
          }(document, "script", "twitter-wjs"));
        </script>
      </p>
    </header>
    

    <hr />

    <div class='row'>
      <div class='column'>
        <a target="_blank" rel="noopener nofollow" class='d-flex no-padding justify-content-center'
          href="https://dometrain.com/course/from-zero-to-hero-configuration-and-options-in-dotnet?ref=david-pine">
          <img src="/img/main/dometrain-horizontal-blue-text.png" style="max-width: 75%;" />
        </a>
      </div>
    </div>

    <hr />

    <section class='row justify-content-center'>
      <a href="https://bit.ly/learning-blazor" target="_blank" rel="nofollow noopener"
        class='d-flex no-padding justify-content-center'>
        <img src="/img/main/thumb-book-cover.png" style="max-width: 95%;" />
      </a>
    </section>

    <hr />

    <ul class="icons">
      <li><a href="" type="application/rss+xml"
          target="_blank" title="RSS" class="fa-lg fa-rss"></a>
      </li>
      
      
<li><a href="//github.com/IEvangelist" target="_blank" title="GitHub" class="fa-lg fa-github"></a></li>



<li><a href="//papercall.io/speakers/david-pine" target="_blank" title="PaperCall" class="fa-lg fa-paper-plane-o"></a></li>







<li><a href="//codepen.io/ievangelist" target="_blank" title="CodePen" class="fa-lg fa-codepen"></a></li>















<li><a href="//youtube.com/user/davidpine7" target="_blank" title="YouTube" class="fa-lg fa-youtube"></a></li>







<li><a href="//medium.com/@davidpine7" target="_blank" title="Medium" class="fa-lg fa-medium"></a></li>



<li><a href="//ievangelistblog.wordpress.com" target="_blank" title="WordPress" class="fa-lg fa-wordpress"></a></li>







<li><a href="//linkedin.com/in/dpine" target="_blank" title="LinkedIn" class="fa-lg fa-linkedin"></a></li>





<li><a href="//stackoverflow.com/users/2410379/david-pine" target="_blank" title="Stack Overflow" class="fa-lg fa-stack-overflow"></a></li>



<li><a href="//reddit.com/user/davidpine7" target="_blank" title="Reddit" class="fa-lg fa-reddit"></a></li>









<li><a href="//twitter.com/davidpine7" target="_blank" title="Twitter" class="fa-lg fa-twitter"></a></li>



<li><a href="mailto:david.pine.7@gmail.com" title="Email" class="fa-lg fa-envelope"></a></li>


      
    </ul>
  </section>

  
  <section id="recent-posts">
    <ul class="posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      
      
      

      
      
      

      
      <li>
        <article>
          <header>
            <h3><a href="http://localhost:1313/blog/dotnet-async-enumerable/">Exploring .NET streaming API scenarios</a></h3>
            
            
            
            <time class="published" datetime='2023-06-19'>
              June 19, 2023</time>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <h3><a href="http://localhost:1313/blog/dotnet-dependency-injection/">A conversation with ChatGPT </a></h3>
            
            
            
            <time class="published" datetime='2022-12-08'>
              December 8, 2022</time>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <h3><a href="http://localhost:1313/blog/github-actions-sdk/">Hello from the GitHub Actions: Core .NET SDK</a></h3>
            
            
            
            <time class="published" datetime='2022-11-30'>
              November 30, 2022</time>
          </header>
        </article>
      </li>
      

      
      <li>
        <ul class="actions">
          <li>
            <a href= /blog/  class="button">
              View more posts
            </a>
          </li>
        </ul>
      </li>
      
    </ul>
  </section>

  
  
  
  
  <section id="categories">
    <ul class="posts">
      <header>
        <h3><a href="/categories/">Categories</a></h3>
      </header>

      
      
      

      
      <li>
        <article>
          <header>
            <a href="/categories/csharp/">csharp</a>
            <span style="float:right;">17</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/asp.net-core/">asp.net core</a>
            <span style="float:right;">10</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/.net-core/">.net core</a>
            <span style="float:right;">8</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/.net/">.net</a>
            <span style="float:right;">7</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/typescript/">typescript</a>
            <span style="float:right;">6</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/angular/">angular</a>
            <span style="float:right;">5</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/rxjs/">rxjs</a>
            <span style="float:right;">4</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/visual-studio/">visual studio</a>
            <span style="float:right;">4</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/wasm/">wasm</a>
            <span style="float:right;">4</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/webassembly/">webassembly</a>
            <span style="float:right;">4</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/blazor/">blazor</a>
            <span style="float:right;">3</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/http/">http</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/json/">json</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/technical-conference/">technical conference</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/tooling/">tooling</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/xunit/">xunit</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/.net-standard/">.net standard</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/azure/">azure</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/azure-functions/">azure functions</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/caching/">caching</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/chatgpt/">chatgpt</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/compression/">compression</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/configuration/">configuration</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/dependency-injection/">dependency injection</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/fear/">fear</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/github/">github</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/gzip/">gzip</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/identity/">identity</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/iot/">iot</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/javascript/">javascript</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/mke-dot-net/">mke dot net</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/openai/">openai</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/raspberry-pi/">raspberry pi</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/roslyn/">roslyn</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/self-branding/">self-branding</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/slack/">slack</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/technical-doubt/">technical doubt</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/twilio/">twilio</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/uwp/">uwp</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/web/">web</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
    </ul>
  </section>
  

  
  

  
  <section id="footer">
    <ul class="icons">
      <li><a href="" type="application/rss+xml"
          target="_blank" title="RSS" class="fa fa-rss"></a>
      </li>
      
      
<li><a href="//github.com/IEvangelist" target="_blank" title="GitHub" class="fa-lg fa-github"></a></li>



<li><a href="//papercall.io/speakers/david-pine" target="_blank" title="PaperCall" class="fa-lg fa-paper-plane-o"></a></li>







<li><a href="//codepen.io/ievangelist" target="_blank" title="CodePen" class="fa-lg fa-codepen"></a></li>















<li><a href="//youtube.com/user/davidpine7" target="_blank" title="YouTube" class="fa-lg fa-youtube"></a></li>







<li><a href="//medium.com/@davidpine7" target="_blank" title="Medium" class="fa-lg fa-medium"></a></li>



<li><a href="//ievangelistblog.wordpress.com" target="_blank" title="WordPress" class="fa-lg fa-wordpress"></a></li>







<li><a href="//linkedin.com/in/dpine" target="_blank" title="LinkedIn" class="fa-lg fa-linkedin"></a></li>





<li><a href="//stackoverflow.com/users/2410379/david-pine" target="_blank" title="Stack Overflow" class="fa-lg fa-stack-overflow"></a></li>



<li><a href="//reddit.com/user/davidpine7" target="_blank" title="Reddit" class="fa-lg fa-reddit"></a></li>









<li><a href="//twitter.com/davidpine7" target="_blank" title="Twitter" class="fa-lg fa-twitter"></a></li>



<li><a href="mailto:david.pine.7@gmail.com" title="Email" class="fa-lg fa-envelope"></a></li>


      
    </ul>

    <p class="copyright">&copy; David Pine 2016-2025. Powered by <a href="//gohugo.io"
        target="_blank">Hugo</a>
    </p>
  </section>

</section>
            </div>
        <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
        

        
        
            
        

        
        
        
            <script src="/js/skel.min.js?1.7.1"></script>
            
            <script src=/js/util.min.js></script>

            
            <script src=/js/backToTop.min.js></script>
            <script src="/js/highlight.min.js?1.7.1"></script>

            
            
            <script src=/js/main.min.js?1.7.1></script>
        

        

            
            <script>
                document.addEventListener('DOMContentLoaded', (event) => {
                    hljs.highlightAll();
                });
            </script>
            
    </body>
</html>

