<!DOCTYPE HTML>

<html>

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <link rel="icon" href="/img/main/favicon.png" type="image/png" />
    <link rel="shortcut icon" href="/favicon.ico" />
    
    
    <title>Exploring C# 7</title>
    
    

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Hugo 0.129.0">
    


    
    <meta name="author" content="David Pine">
    
    
    <meta name="description" content="Expressiveness Redefined &amp; #notasugly">
    

    
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/img/2017/03/exploration.png">
  <meta name="twitter:title" content="Exploring C# 7">
  <meta name="twitter:description" content="Expressiveness Redefined &amp; #notasugly">

    <meta property="og:url" content="http://localhost:1313/blog/exploring-csharp-seven/">
  <meta property="og:site_name" content="David Pine">
  <meta property="og:title" content="Exploring C# 7">
  <meta property="og:description" content="Expressiveness Redefined &amp; #notasugly">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2017-03-26T00:00:00+00:00">
    <meta property="article:modified_time" content="2017-03-26T00:00:00+00:00">
    <meta property="og:image" content="http://localhost:1313/img/2017/03/exploration.png">

    
  <meta itemprop="name" content="Exploring C# 7">
  <meta itemprop="description" content="Expressiveness Redefined &amp; #notasugly">
  <meta itemprop="datePublished" content="2017-03-26T00:00:00+00:00">
  <meta itemprop="dateModified" content="2017-03-26T00:00:00+00:00">
  <meta itemprop="wordCount" content="2307">
  <meta itemprop="image" content="http://localhost:1313/img/2017/03/exploration.png">
  <meta itemprop="keywords" content="CSharp,.NET,Visual Studio">

    

    
    
    
    

    
    
    
    <link rel="stylesheet" href=/css/add-on.min.css />
    <link rel="stylesheet" href="/css/font-awesome.min.css" />
    
    <link rel="stylesheet" href=/css/github-dark.min.css />
    
    <link rel="stylesheet" href=/css/google-font.min.css />
    
    <link rel="stylesheet" href=/css/main.min.css />
    

    

    
    
    
</head>

<body>
    <a rel="me" href="https://dotnet.social/@davidpine"></a>
    <script src="/js/jquery.min.js?1.7.1"></script>

    
    <div id="wrapper">
    
    
<header id="header">
    
        <h2><a href="http://localhost:1313/">IEvangelist</i></a></h2>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/blog">
                        
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="/categories">
                        
                            <i class="fa fa-list-ol">&nbsp;</i>Categories
                    </a>
                </li>
            
                <li>
                    <a href="/about">
                        
                            <i class="fa fa-smile-o">&nbsp;</i>About
                    </a>
                </li>
            
                <li>
                    <a href="/speaking">
                        
                            <i class="fa fa-bullhorn">&nbsp;</i>Speaking
                    </a>
                </li>
            
                <li>
                    <a href="/media">
                        
                            <i class="fa fa-video-camera">&nbsp;</i>Media
                    </a>
                </li>
            
                <li>
                    <a href="/pictures">
                        
                            <i class="fa fa-camera">&nbsp;</i>Pictures
                    </a>
                </li>
            
                <li>
                    <a href="/conclusions">
                        
                            <i class="fa fa-lightbulb-o">&nbsp;</i>Conclusions
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="q" value="site:http://localhost:1313/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="q" value="site:http://localhost:1313/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/blog">
                            <h3>
                                
                                    <i class="fa fa-newspaper-o">&nbsp;</i>
                                
                                Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            <h3>
                                
                                    <i class="fa fa-list-ol">&nbsp;</i>
                                
                                Categories
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about">
                            <h3>
                                
                                    <i class="fa fa-smile-o">&nbsp;</i>
                                
                                About
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/speaking">
                            <h3>
                                
                                    <i class="fa fa-bullhorn">&nbsp;</i>
                                
                                Speaking
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/media">
                            <h3>
                                
                                    <i class="fa fa-video-camera">&nbsp;</i>
                                
                                Media
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/pictures">
                            <h3>
                                
                                    <i class="fa fa-camera">&nbsp;</i>
                                
                                Pictures
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/conclusions">
                            <h3>
                                
                                    <i class="fa fa-lightbulb-o">&nbsp;</i>
                                
                                Conclusions
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section>
            <ul class="links">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    <li>
                        <a href="http://localhost:1313/blog/dotnet-async-enumerable/"><p>Exploring .NET streaming API scenarios</p></a>
                    </li>
                
                    <li>
                        <a href="http://localhost:1313/blog/dotnet-dependency-injection/"><p>A conversation with ChatGPT </p></a>
                    </li>
                
                    <li>
                        <a href="http://localhost:1313/blog/github-actions-sdk/"><p>Hello from the GitHub Actions: Core .NET SDK</p></a>
                    </li>
                
            </ul>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            


<li><a href="//github.com/sponsors/IEvangelist?o=esb" target="_blank" class="share-btn github" title="Sponsor IEvangelist on GitHub?">
    <i class="fa fa-heart-o"></i>
    <p>Sponsor</p>
</a></li>


<li><a href="//twitter.com/share?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f&text=Exploring%20C%23%207&via=davidpine7" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f&title=Exploring%20C%23%207" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f&title=Exploring%20C%23%207" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f&title=Exploring%20C%23%207" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by David%20Pine&body=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
    <header>
    <div class="title">
        
            <h1><a href="http://localhost:1313/blog/exploring-csharp-seven/">Exploring C# 7</a></h1>
            
        
        
            <p>Expressiveness Redefined &amp; #notasugly</p>
        
    </div>
    <div class="meta">
        
            
        

        
        
        
        
        
        

        
        
        

        <div style="display: none;"
            data-date='2025'
            data-lastmod='2017'
            data-min='2017'
            data-max='2025'
            data-difference='8'
            data-var='5'>
        </div>

        
        <time class="published" data-hover='2017'
            datetime='2017'
            data-initial='Written in' data-extras='8'>
            <span class="underline">(<i class="fa fa-mouse-pointer"></i>?</span>)
        </time>
        

        <span class="author">David Pine</span>
        
            <p>11 minute read</p>
        
        
    </div>
</header>


    <section id="social-share">
        <ul class="icons">
            


<li><a href="//github.com/sponsors/IEvangelist?o=esb" target="_blank" class="share-btn github" title="Sponsor IEvangelist on GitHub?">
    <i class="fa fa-heart-o"></i>
    <p>Sponsor</p>
</a></li>


<li><a href="//twitter.com/share?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f&text=Exploring%20C%23%207&via=davidpine7" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f&title=Exploring%20C%23%207" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f&title=Exploring%20C%23%207" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f&title=Exploring%20C%23%207" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by David%20Pine&body=http%3a%2f%2flocalhost%3a1313%2fblog%2fexploring-csharp-seven%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
    
    

    
        
        




    


        

        <a href="http://localhost:1313/blog/exploring-csharp-seven/" class="image featured">
            <img src="/img/2017/03/exploration.png" alt="" />
        </a>
    


    <div id="content">
        <h1 id="intro">Intro</h1>
<p>Since we have all been actively celebrating the 20<!-- raw HTML omitted -->th<!-- raw HTML omitted --> anniversary of <strong>Visual Studio</strong>, it felt appropriate to post about <strong>C# 7</strong>!
In this post we will explore the features that make <strong>C# 7</strong> so promising. I&rsquo;ve put together a demonstration <strong>C# 7</strong> project, that is available


    
        
    

    <a href="https://github.com/IEvangelist/IEvangelist.CSharp" target='_blank'>here</a>

.</p>
<p>This post contains examples and details on five of the nine new <strong>C# 7</strong> features.</p>
<ul>
<li>Pattern matching</li>
<li><code>out</code> variables</li>
<li>Tuples</li>
<li>Local functions</li>
<li><code>throw</code> expressions</li>
</ul>
<p>These are the remaining features, that I <strong>do not</strong> cover in this post.</p>
<ul>
<li><code>ref</code> locals and returns</li>
<li>More expression-bodied members</li>
<li>Generalized <code>async</code> return types</li>
<li>Numeric literal syntax improvements</li>
</ul>
<h2 id="pattern-matching">Pattern Matching</h2>
<p>With <strong>C# 7</strong> we welcomed the concept of &ldquo;patterns&rdquo;. This concept allows for the extraction of information when a variable is tested for a certain &ldquo;shape&rdquo; and matches a
specified pattern. We&rsquo;re able to leverage the &ldquo;shape&rdquo; from which we matched on as a declared variable in scope, consuming it as we deem necessary. This is referred to as
&ldquo;dynamic&rdquo; (or &ldquo;method&rdquo;) dispatch.</p>
<blockquote>
<!-- raw HTML omitted -->
</blockquote>
<p>Dynamic dispatch is nothing new to <strong>C#</strong>, and has been around forever. <strong>C# 7</strong> exposes this functionality via constant and type patterns.</p>
<h3 id="constant-patterns">Constant Patterns</h3>
<p>Constant pattern <code>null</code>, similar to <code>(obj == null)</code>.</p>
<blockquote>
<!-- raw HTML omitted -->
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> IsExpression(<span style="color:#66d9ef">object</span> obj)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (obj <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">null</span>) <span style="color:#75715e">// Constant pattern &#34;obj is null&#34;</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="type-patterns">Type Patterns</h3>
<p>Look closely at this syntax. This is where we start mixing metaphors. Prior to <strong>C# 7</strong> we could use the &ldquo;is&rdquo; expression to do simple type assertions
<code>obj is [type]</code>. Additionally, we all know how to declare a variable <code>int i</code>. This new syntax merges these concepts together and is more compound and
expressive.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> IsExpression(<span style="color:#66d9ef">object</span> obj)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// (obj is int i)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// &#34;obj is int&#34;     // type assertion &#34;typically evaluates type compatibility at run time&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//        &#34;int i&#34;   // declaration</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (obj <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">int</span> i) <span style="color:#75715e">// Type pattern &#34;obj is int i&#34;</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// We can then use the &#34;i&#34; (integer) variable </span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Note, the variable &#34;i&#34; is also available in this scope.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// This is in fact by design, more on that out the &#34;out variable&#34; section </span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<!-- raw HTML omitted -->
</blockquote>
<p>The <code>when</code> keyword has also been extended, now it not only applies to the <code>catch</code> statement but also the <code>case</code> labels within a <code>switch</code> statement.
Consider the following classes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Shape</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">double</span> Height { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">double</span> Length { <span style="color:#66d9ef">get</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> Shape(<span style="color:#66d9ef">double</span> height, <span style="color:#66d9ef">double</span> length)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Height = height;
</span></span><span style="display:flex;"><span>        Length = length;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> : Shape
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">double</span> Radius =&gt; Height / <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">double</span> Diameter =&gt; Radius * <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">double</span> Circumference =&gt; <span style="color:#ae81ff">2</span> * Math.PI * Radius;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> Circle(<span style="color:#66d9ef">double</span> height, <span style="color:#66d9ef">double</span> length) 
</span></span><span style="display:flex;"><span>        : <span style="color:#66d9ef">base</span>(height, length) { }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rectangle</span> : Shape
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">bool</span> IsSquare =&gt; Height == Length;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">internal</span> Rectangle(<span style="color:#66d9ef">double</span> height, <span style="color:#66d9ef">double</span> length) 
</span></span><span style="display:flex;"><span>        : <span style="color:#66d9ef">base</span>(height, length) { }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now imagine that we have a collection of these <code>Shape</code> objects, and we want to print out their various details - we could use &ldquo;pattern matching&rdquo; as such:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> OutputShapes(IEnumerable&lt;Shape&gt; shapes)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> shape <span style="color:#66d9ef">in</span> shapes)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Previously, this was not permitted. Case labels had to be concrete</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// such as enums, numerics, bools, strings, etc.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">switch</span> (shape)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> Circle c:
</span></span><span style="display:flex;"><span>                WriteLine(<span style="color:#e6db74">$&#34;circle with circumference {c.Circumference}&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> Rectangle s when (s.IsSquare):
</span></span><span style="display:flex;"><span>                WriteLine(<span style="color:#e6db74">$&#34;{s.Length} x {s.Height} square&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> Rectangle r:
</span></span><span style="display:flex;"><span>                WriteLine(<span style="color:#e6db74">$&#34;{r.Length} x {r.Height} rectangle&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>                WriteLine(<span style="color:#e6db74">&#34;This is not a shape that we&#39;re familiar with...&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#66d9ef">null</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(shape));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>As you can see, we are able to more easily reason about the specific <code>shape</code> in context. For example, with each iteration of our collection we <code>switch</code>
on the <code>shape</code>. If the <code>shape</code> is an instance of the <code>Circle</code> subclass, we&rsquo;ll execute the <code>case</code> label &ldquo;Circle&rdquo; and we get the instance declared as
its type in the variable <code>c</code>. Likewise, if the <code>shape</code> is a <code>Rectangle</code> and that rectangle <code>s</code> just so happens to also be a square <code>when (s.IsSquare)</code>
evaluates to <code>true</code> - we will then execute the square <code>case</code> label. If the <code>shape</code> is an instance of a <code>Rectangle</code> but not a square, we execute the
&ldquo;Rectangle&rdquo; <code>case</code> label. Notice we still have <code>default</code> fall-thru. Finally, we can also have a &ldquo;null&rdquo; <code>case</code> label.</p>
<h2 id="out-variables"><code>out</code> variables</h2>
<p><code>.NET</code> developers are more than familiar with the <code>Try*</code> pattern, but as a refresher this is what it looks like. Imagine we are trying to parse
a <code>System.String</code> input value as a <code>System.Int32</code>. Imagine that the consumer doesn&rsquo;t really care if it is parsed, they&rsquo;re fine with a <code>default(int)</code>
if it fails.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> ToInt32(<span style="color:#66d9ef">string</span> input)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> result;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">int</span>.TryParse(input, <span style="color:#66d9ef">out</span> result))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> result;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">default</span>(<span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Let&rsquo;s quickly recap this. First, we declare a variable namely <code>result</code>. We then invoke the <code>int.TryParse</code> which returns a <code>bool</code> whether or not the
parse was successful. If <code>true</code> then the declare <code>result</code> variable is not equal to the parsed <code>int</code> value. If the <code>input</code> was <code>&quot;12&quot;</code>, then <code>result</code> would be <code>12</code>. If the <code>input</code>
was <code>&quot;Pickles&quot;</code>, then the return from the invocation to the <code>ToInt32</code> would be <code>0</code> as <code>int.TryParse</code> would return <code>false</code>.</p>
<p>Now with <strong>C# 7</strong> we can declare our <code>out</code> variable inline as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> ToInt32(<span style="color:#66d9ef">string</span> input)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Note: the declaration is inline with the out keyword</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">int</span>.TryParse(input, <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">int</span> result))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> result;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">default</span>(<span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The scope of the <code>result</code> variable is identical to the previous example, as it actually &ldquo;leaks&rdquo; out to the <code>if</code> statement. We can re-write this even
more expressively:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> ToInt32(<span style="color:#66d9ef">string</span> input) =&gt; <span style="color:#66d9ef">int</span>.TryParse(input, <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">var</span> result) ? result : result;
</span></span></code></pre></div><p>A few things you might notice. First, this is now a single line as we can express this with the lambda operator. We leverage the ternary operator as
well. Additionally, we can use the <code>var</code> keyword for our declaration. And since the <code>result</code> variable is in scope we can use it as both return cases.
If unable to be parsed, it is in fact a <code>default(int)</code> anyways.</p>
<h2 id="tuples">Tuples</h2>
<p>Most developers are familiar with <code>System.Tuple&lt;T[,T1...]&gt;</code>. This <code>class</code> has served us well all the while it has been around.
One of the advantages is that it exposes <code>readonly</code> fields - from the values that it is instantiated with. This
was also great for equality comparisons and even using the tuple as a dictionary key.</p>
<p>In <strong>C# 7</strong> we have a new syntax for expressing tuples. Enter the <code>ValueTuple</code>, and as the name implies - this is a <code>struct</code> instead of a <code>class</code>. There
are obvious performance gains from using a light-weight value-type over the allocation of a <code>class</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> LegacyTuple()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> letters = <span style="color:#66d9ef">new</span> Tuple&lt;<span style="color:#66d9ef">char</span>, <span style="color:#66d9ef">char</span>&gt;(<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Values were accessible via these Item* fields.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> a = letters.Item1;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> b = letters.Item2;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This wasn&rsquo;t overly exciting from an API perspective, as the field names do not really imply anything about their intention.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> ValueTuple()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> letters = (<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> a = letters.Item1;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> b = letters.Item2;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Note: ToTuple extension method</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> systemTuple = letters.ToTuple();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> c = systemTuple.Item1;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> d = systemTuple.Item2;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>You might notice that the syntactic sugar is pouring over this new feature. This is referred to as a &ldquo;tuple literal&rdquo;. We dropped the entire <code>new</code> keyword
usage, as well as specifying the types. They are all inferred and in fact known, IntelliSense proves this immediately. But we still have the issue of
these tuples not being very API friendly. Let&rsquo;s explore how we can give them custom names.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> MoreValueTuples()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> lessonDetails = 
</span></span><span style="display:flex;"><span>        (Subject: <span style="color:#e6db74">&#34;C# Language Semantics&#34;</span>, Category: Categories.Programming, Level: <span style="color:#ae81ff">300</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Note: IntelliSense now hides Item1, Item2 and Item3</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Instead we are provided with the following:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> subject = lessonDetails.Subject;    <span style="color:#75715e">// string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> category = lessonDetails.Category;  <span style="color:#75715e">// Categories [enum]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> level = lessonDetails.Level;        <span style="color:#75715e">// int</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="deconstruction">Deconstruction</h3>
<p>Now that we see how we can instantiate a <code>ValueTuple</code>, let&rsquo;s take a look at how we can declare one for usage.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> DeconstructionExamples()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> lessonDetails = 
</span></span><span style="display:flex;"><span>        (Subject: <span style="color:#e6db74">&#34;C# Language Semantics&#34;</span>, Category: Categories.Programming, Level: <span style="color:#ae81ff">300</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// We can deconstruct in three various ways</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// First, the fully qualified type</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#66d9ef">string</span> subject, Categories category, <span style="color:#66d9ef">int</span> level) = lessonDetails;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Next using the var keyword per named declaration</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#66d9ef">var</span> subject, <span style="color:#66d9ef">var</span> category, <span style="color:#66d9ef">var</span> level) = lessonDetails;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Finally, omitting any type declaration and using var wholeheartedly</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> (subject, category, level) = lessonDetails;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>There are often questions about how deconstruction is implemented, and whether or not it is ordinal based. For the <code>ValueTuple</code> it is in fact
ordinal based. However, note that deconstruction is not actually limited to tuples. With <strong>C# 7</strong> any <code>object</code> that defines a <code>public void Deconstruct</code>
method can be deconstructed. Consider the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> (<span style="color:#66d9ef">string</span> First, <span style="color:#66d9ef">string</span> Middle, <span style="color:#66d9ef">string</span> Last) _name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> DateTime DateOfBirth _dateOfBirth;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Person((<span style="color:#66d9ef">string</span> f, <span style="color:#66d9ef">string</span> m, <span style="color:#66d9ef">string</span> l) name, DateTime dob)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _name = name;
</span></span><span style="display:flex;"><span>        _dateOfBirth = dob;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Deconstruct(<span style="color:#66d9ef">out</span> <span style="color:#66d9ef">double</span> age, 
</span></span><span style="display:flex;"><span>                            <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">string</span> firstName,
</span></span><span style="display:flex;"><span>                            <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">string</span> middleName, 
</span></span><span style="display:flex;"><span>                            <span style="color:#66d9ef">out</span> <span style="color:#66d9ef">string</span> lastName)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        age = (DateTime.Now - _dateOfBirth).TotalYears;
</span></span><span style="display:flex;"><span>        firstName = _name.First;
</span></span><span style="display:flex;"><span>        middleName = _name.Middle;
</span></span><span style="display:flex;"><span>        lastName = _name.Last;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now that the <code>Person</code> is defined with this <code>Deconstruct</code> method, we can deconstruct it following the same ordinal based semantics.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> DeconstructNonTuple()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> person = <span style="color:#66d9ef">new</span> Person((<span style="color:#e6db74">&#34;David&#34;</span>, <span style="color:#e6db74">&#34;Michael&#34;</span>, <span style="color:#e6db74">&#34;Pine&#34;</span>), <span style="color:#66d9ef">new</span> DateTime(<span style="color:#ae81ff">1984</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">7</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    (<span style="color:#66d9ef">int</span> age, <span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> middle, <span style="color:#66d9ef">string</span> last) = person;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Note: to partially deconstruct you can ignore a specific ordinal by using the _</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// This does not actually naming the ordinal variable, but truly ignoring it.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> (_, _, _, _) = person;          <span style="color:#75715e">// Ignore all, not very useful</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> (_, firstName, _, _) = person;  <span style="color:#75715e">// Cherry-pick first name</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="comparing-anonymous-object-vs-valuetuple">Comparing Anonymous <code>object</code> vs. <code>ValueTuple</code></h4>
<p>At first glance tuples look almost like anonymous objects. They are in fact very different. An anonymous object is actually a reference type whereas
a <code>ValueTuple</code> is a <code>struct</code> - value type. Also, you can only return an anonymous object from a method as an <code>object</code> which isn&rsquo;t very API friendly.
Within a fluent <code>LINQ</code> chained method anonymous objects are great and will still be normal for projection.</p>
<h2 id="local-functions">Local Functions</h2>
<p>At first glance, local functions seem a bit odd. I&rsquo;ve heard people say, &ldquo;this method is starting to look like a class&rdquo;. At first,
I was one of these people too. Once you get used to the idea and see the benefits it really does make sense. Here is a quick
comparison of the two, note the benefits of local functions as they compare to lambdas.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">Lambda(s)</th>
<th style="text-align:left">Local Function(s)</th>
<th style="text-align:left">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">Generics</td>
<td style="text-align:left"><i class="fa fa-times" aria-hidden="true"></i></td>
<td style="text-align:left"><i class="fa fa-check" aria-hidden="true"></i></td>
<td style="text-align:left">Local functions allow for the use of generics</td>
</tr>
<tr>
<td style="text-align:right">Iterators</td>
<td style="text-align:left"><i class="fa fa-times" aria-hidden="true"></i></td>
<td style="text-align:left"><i class="fa fa-check" aria-hidden="true"></i></td>
<td style="text-align:left">The <code>yield</code> keyword is valid within local functions</td>
</tr>
<tr>
<td style="text-align:right">Recursion</td>
<td style="text-align:left"><i class="fa fa-times" aria-hidden="true"></i></td>
<td style="text-align:left"><i class="fa fa-check" aria-hidden="true"></i></td>
<td style="text-align:left">Local functions support recursion</td>
</tr>
<tr>
<td style="text-align:right">Allocatey</td>
<td style="text-align:left"><i class="fa fa-check" aria-hidden="true"></i></td>
<td style="text-align:left"><i class="fa fa-times" aria-hidden="true"></i></td>
<td style="text-align:left">Delegates require an <code>object</code> allocation</td>
</tr>
<tr>
<td style="text-align:right">Potential Variable Lifting</td>
<td style="text-align:left"><i class="fa fa-check" aria-hidden="true"></i></td>
<td style="text-align:left"><i class="fa fa-times" aria-hidden="true"></i></td>
<td style="text-align:left">Implicitly captured closure is non-existent</td>
</tr>
</tbody>
</table>
<p>It is vital to understand that local functions are <!-- raw HTML omitted -->not<!-- raw HTML omitted --> a replacement for <code>Action&lt;T[,T1...]&gt;</code> or <code>Func&lt;T[,T1...]&gt;</code>. These delegate declarations are still
needed as parameters to enable lambda expression arguments. If you see the <strong>#notasugly</strong> hashtag, this was coined by Mads Torgersen.</p>
<h3 id="more-efficient">More efficient</h3>
<p>When using local functions, there is no <code>object</code> created - unlike delegates that require an object for it to be used. Likewise, local functions
help to alleviate another issue with lambdas in that they do not need to implicitly capture a variable longer than it is potentially needed.
In <strong>C#</strong> lambdas capture values by reference, meaning that garbage collection may not be able to correctly clean up code that is &ldquo;allocatey&rdquo;.</p>
<h4 id="declaration">Declaration</h4>
<p>With local functions, the declaration of the local function can actually occur after the <code>return</code> statement - as long as it is within the method body
in which it is consumed. If you&rsquo;re familiar with some of the implementations of the <code>LINQ</code> extension methods on <code>IEnumerable&lt;T&gt;</code>, you would know a lot
of the methods are defined with argument validation followed by the instantiation of &ldquo;Iterator&rdquo; classes, where these classes do the actual work.</p>
<p>Because of deferred execution, iterators do not actually execute validation logic until they are iterated - for example invoking <code>.ToList()</code>, <code>.ToArray()</code>,
or simply using them in a <code>foreach</code> statement. Ideally, we would like our iterators to &ldquo;fail-fast&rdquo; in the event of being given invalid arguments. Let&rsquo;s
imagine that the <code>.Select</code> extension method was implemented as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;TResult&gt; Select&lt;T, TResult&gt;(<span style="color:#66d9ef">this</span> IEnumerable&lt;T&gt; source, 
</span></span><span style="display:flex;"><span>                                                           Func&lt;T, TResult&gt; selector)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (source == <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(source));
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (selector == <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(selector));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> item <span style="color:#66d9ef">in</span> source)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> selector(item);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Since this method is written as an iterator, the validation is skipped until it&rsquo;s iterated. With <strong>C# 7</strong> we can use local function to get both
&ldquo;fail-fast&rdquo; validation and the iterator together.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;TResult&gt; Select&lt;T, TResult&gt;(<span style="color:#66d9ef">this</span> IEnumerable&lt;T&gt; source, 
</span></span><span style="display:flex;"><span>                                                           Func&lt;T, TResult&gt; selector)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (source == <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(source));
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (selector == <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(selector));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> iterator();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    IEnumerable&lt;TResult&gt; iterator()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> item <span style="color:#66d9ef">in</span> source)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> selector(item);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="throw-expressions"><code>throw</code> expressions</h1>
<p>Leveraging some pre-existing <strong>C#</strong> functionality - <code>null</code> coalescing, we can now <code>throw</code> when a value is evaluated as <code>null</code>. A common validation
mechanism is to <code>throw</code> if an argument is <code>null</code>. Consider the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LegacyService</span> : IService
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> IContextProvider _provider;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> LegacyService(IContextProvider provider)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (provider == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(provider));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _provider = provider;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>With <strong>C# 7</strong> we can simplify this with the <code>throw</code> expression.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ModernService</span> : IService
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> IContextProvider _provider;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ModernService(IContextProvider provider)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _provider = provider ?? <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentNullException(nameof(provider));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>If the given <code>provider</code> argument is <code>null</code> we&rsquo;ll coalesce over to the <code>throw</code> expression.</p>
<h1 id="from-c-6-to-c-7-then-and-now">From C# 6 to C# 7, then and now</h1>
<p>I have a presentation that I have been fortunate enough to give at some regional conferences. One of these occasions was recorded, and I felt it
made sense to share it here - Enjoy!!</p>
<!-- raw HTML omitted -->
<p><strong>Further Reading</strong></p>
<ul>
<li>

    
        
    

    <a href="https://docs.microsoft.com/en-us/dotnet/articles/csharp/csharp-7" target='_blank'>What&rsquo;s new in C# 7</a>

</li>
</ul>

    </div>

    <footer>
        <ul class="stats">
    <li>
        <i class="fa fa-list-ol">&nbsp;</i>
        Categories
    </li>
    
        
        
            
            
            <li><a class="article-category-link" href="http://localhost:1313/categories/csharp">CSharp</a></li>
            
            
            <li><a class="article-category-link" href="http://localhost:1313/categories/.net">.NET</a></li>
            
            
            <li><a class="article-category-link" href="http://localhost:1313/categories/visual-studio">Visual Studio</a></li>
            
        
    
</ul>
    </footer>
</article>
<ul class="actions pagination">
    
        <li><a href="http://localhost:1313/blog/overriding-default-di/"
                class="button big previous">Overriding ASP.NET Core Framework-Provided Services</a></li>
    

    
        <li><a href="http://localhost:1313/blog/typescript-javascript-reimagined/"
                class="button big next">TypeScript - JavaScript Reimagined</a></li>
    
</ul>



    


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
    
    <section class='p-2 justify-content-center'>
      <img src="/img/main/me-1.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" />
      <img src="/img/main/me-2.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" style="display: none;" />
      <img src="/img/main/me-3.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" style="display: none;" />
      <img src="/img/main/me-4.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" style="display: none;" />
      <img src="/img/main/me-5.png" class="intro-circle fade-swap d-flex" width=""
        alt="David Pine" style="display: none;" />
      
      
    </section>
    
    <header>
      <h2>David Pine</h2>
      <p>
        🤓 Changing the world — one line of code at a time.
        <span class="responsive-float">
          <a id='davidpine7' href='https://twitter.com/davidpine7?ref_src=twsrc%5Etfw' class='twitter-follow-button'
            data-size='large' data-show-count='false'>
            Follow @davidpine7
          </a>
        </span>
        <script>
          window.twitter = (function (d, s, id) {
            var js,
              fjs = d.getElementsByTagName(s)[0],
              t = window.twttr || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);

            t._e = [];
            t.ready = function (f) {
              t._e.push(f);
            };

            return t;
          }(document, "script", "twitter-wjs"));
        </script>
      </p>
    </header>
    

    <hr />

    <div class='row'>
      <div class='column'>
        <a target="_blank" rel="noopener nofollow" class='d-flex no-padding justify-content-center'
          href="https://dometrain.com/course/from-zero-to-hero-configuration-and-options-in-dotnet?ref=david-pine">
          <img src="/img/main/dometrain-horizontal-blue-text.png" style="max-width: 75%;" />
        </a>
      </div>
    </div>

    <hr />

    <section class='row justify-content-center'>
      <a href="https://bit.ly/learning-blazor" target="_blank" rel="nofollow noopener"
        class='d-flex no-padding justify-content-center'>
        <img src="/img/main/thumb-book-cover.png" style="max-width: 95%;" />
      </a>
    </section>

    <hr />

    <ul class="icons">
      <li><a href="" type="application/rss+xml"
          target="_blank" title="RSS" class="fa-lg fa-rss"></a>
      </li>
      
      
<li><a href="//github.com/IEvangelist" target="_blank" title="GitHub" class="fa-lg fa-github"></a></li>



<li><a href="//papercall.io/speakers/david-pine" target="_blank" title="PaperCall" class="fa-lg fa-paper-plane-o"></a></li>







<li><a href="//codepen.io/ievangelist" target="_blank" title="CodePen" class="fa-lg fa-codepen"></a></li>















<li><a href="//youtube.com/user/davidpine7" target="_blank" title="YouTube" class="fa-lg fa-youtube"></a></li>







<li><a href="//medium.com/@davidpine7" target="_blank" title="Medium" class="fa-lg fa-medium"></a></li>



<li><a href="//ievangelistblog.wordpress.com" target="_blank" title="WordPress" class="fa-lg fa-wordpress"></a></li>







<li><a href="//linkedin.com/in/dpine" target="_blank" title="LinkedIn" class="fa-lg fa-linkedin"></a></li>





<li><a href="//stackoverflow.com/users/2410379/david-pine" target="_blank" title="Stack Overflow" class="fa-lg fa-stack-overflow"></a></li>



<li><a href="//reddit.com/user/davidpine7" target="_blank" title="Reddit" class="fa-lg fa-reddit"></a></li>









<li><a href="//twitter.com/davidpine7" target="_blank" title="Twitter" class="fa-lg fa-twitter"></a></li>



<li><a href="mailto:david.pine.7@gmail.com" title="Email" class="fa-lg fa-envelope"></a></li>


      
    </ul>
  </section>

  
  <section id="recent-posts">
    <ul class="posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      
      
      

      
      
      

      
      <li>
        <article>
          <header>
            <h3><a href="http://localhost:1313/blog/dotnet-async-enumerable/">Exploring .NET streaming API scenarios</a></h3>
            
            
            
            <time class="published" datetime='2023-06-19'>
              June 19, 2023</time>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <h3><a href="http://localhost:1313/blog/dotnet-dependency-injection/">A conversation with ChatGPT </a></h3>
            
            
            
            <time class="published" datetime='2022-12-08'>
              December 8, 2022</time>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <h3><a href="http://localhost:1313/blog/github-actions-sdk/">Hello from the GitHub Actions: Core .NET SDK</a></h3>
            
            
            
            <time class="published" datetime='2022-11-30'>
              November 30, 2022</time>
          </header>
        </article>
      </li>
      

      
      <li>
        <ul class="actions">
          <li>
            <a href= /blog/  class="button">
              View more posts
            </a>
          </li>
        </ul>
      </li>
      
    </ul>
  </section>

  
  
  
  
  <section id="categories">
    <ul class="posts">
      <header>
        <h3><a href="/categories/">Categories</a></h3>
      </header>

      
      
      

      
      <li>
        <article>
          <header>
            <a href="/categories/csharp/">csharp</a>
            <span style="float:right;">17</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/asp.net-core/">asp.net core</a>
            <span style="float:right;">10</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/.net-core/">.net core</a>
            <span style="float:right;">8</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/.net/">.net</a>
            <span style="float:right;">7</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/typescript/">typescript</a>
            <span style="float:right;">6</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/angular/">angular</a>
            <span style="float:right;">5</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/rxjs/">rxjs</a>
            <span style="float:right;">4</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/visual-studio/">visual studio</a>
            <span style="float:right;">4</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/wasm/">wasm</a>
            <span style="float:right;">4</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/webassembly/">webassembly</a>
            <span style="float:right;">4</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/blazor/">blazor</a>
            <span style="float:right;">3</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/http/">http</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/json/">json</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/technical-conference/">technical conference</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/tooling/">tooling</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/xunit/">xunit</a>
            <span style="float:right;">2</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/.net-standard/">.net standard</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/azure/">azure</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/azure-functions/">azure functions</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/caching/">caching</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/chatgpt/">chatgpt</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/compression/">compression</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/configuration/">configuration</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/dependency-injection/">dependency injection</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/fear/">fear</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/github/">github</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/gzip/">gzip</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/identity/">identity</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/iot/">iot</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/javascript/">javascript</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/mke-dot-net/">mke dot net</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/openai/">openai</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/raspberry-pi/">raspberry pi</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/roslyn/">roslyn</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/self-branding/">self-branding</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/slack/">slack</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/technical-doubt/">technical doubt</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/twilio/">twilio</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/uwp/">uwp</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
      <li>
        <article>
          <header>
            <a href="/categories/web/">web</a>
            <span style="float:right;">1</span>
          </header>
        </article>
      </li>
      
    </ul>
  </section>
  

  
  

  
  <section id="footer">
    <ul class="icons">
      <li><a href="" type="application/rss+xml"
          target="_blank" title="RSS" class="fa fa-rss"></a>
      </li>
      
      
<li><a href="//github.com/IEvangelist" target="_blank" title="GitHub" class="fa-lg fa-github"></a></li>



<li><a href="//papercall.io/speakers/david-pine" target="_blank" title="PaperCall" class="fa-lg fa-paper-plane-o"></a></li>







<li><a href="//codepen.io/ievangelist" target="_blank" title="CodePen" class="fa-lg fa-codepen"></a></li>















<li><a href="//youtube.com/user/davidpine7" target="_blank" title="YouTube" class="fa-lg fa-youtube"></a></li>







<li><a href="//medium.com/@davidpine7" target="_blank" title="Medium" class="fa-lg fa-medium"></a></li>



<li><a href="//ievangelistblog.wordpress.com" target="_blank" title="WordPress" class="fa-lg fa-wordpress"></a></li>







<li><a href="//linkedin.com/in/dpine" target="_blank" title="LinkedIn" class="fa-lg fa-linkedin"></a></li>





<li><a href="//stackoverflow.com/users/2410379/david-pine" target="_blank" title="Stack Overflow" class="fa-lg fa-stack-overflow"></a></li>



<li><a href="//reddit.com/user/davidpine7" target="_blank" title="Reddit" class="fa-lg fa-reddit"></a></li>









<li><a href="//twitter.com/davidpine7" target="_blank" title="Twitter" class="fa-lg fa-twitter"></a></li>



<li><a href="mailto:david.pine.7@gmail.com" title="Email" class="fa-lg fa-envelope"></a></li>


      
    </ul>

    <p class="copyright">&copy; David Pine 2016-2025. Powered by <a href="//gohugo.io"
        target="_blank">Hugo</a>
    </p>
  </section>

</section>
            </div>
        <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
        

        
        
            
        

        
        
        
            <script src="/js/skel.min.js?1.7.1"></script>
            
            <script src=/js/util.min.js></script>

            
            <script src=/js/backToTop.min.js></script>
            <script src="/js/highlight.min.js?1.7.1"></script>

            
            
            <script src=/js/main.min.js?1.7.1></script>
        

        

            
            <script>
                document.addEventListener('DOMContentLoaded', (event) => {
                    hljs.highlightAll();
                });
            </script>
            
    </body>
</html>

